<div class="row">
  <div class="col-xs-offset-1 col-xs-7">
    <%= form_for(@upload, multipart: true) do |f| %>
      <div class="form-group">
        <label>CSV Validations</label><br />
        <ul>
          <% @validators.each do |validations| %>
            <li><%= validations %></li>
          <% end %>
        </ul>
      </div>

      <% if @upload.csv_type.nil? %>
        <%= render partial: 'csv_type_select', locals: { f: f } %>
      <% else %>
        <%= render partial: 'csv_type_static', locals: { upload: @upload, f: f } %>
      <% end %>

      <div class="form-group">
        <%= f.label(:skip_lines_before_header) %><br />
        <%= f.text_field(:skip_lines) %>
      </div>

      <div class="form-group">
        <%= f.label(:column_separator) %><br />
        <%= f.select(:col_sep, options_for_select(Settings.csv_upload.column_separators, @upload.col_sep),
                     { include_blank: "Select column separator" },
                     { class: "form-control", required: true }) %>
      </div>

      <div class="form-group">
        <%= f.label(:upload_file) %>
        <%= f.file_field(:upload_file, class: "form-control", required: true, accept: "text/csv, text/plain") %>
      </div>

      <div class="form-group">
        <%= f.label(:comment) %><br />
        <%= f.text_field(:comment, style: 'width: 100%') %>
      </div>

      <div class="actions">
        <%= link_to "Cancel", uploads_path, class: "btn btn-default" %>
        <%= f.submit "Upload", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
